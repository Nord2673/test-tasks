<html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <head>
        <title>Аккордеоны</title>
        <style>
            :root {
                --accordion-color: #f5f5dc;
                --div-margin-bottom: 20px;
                --border-param: 1px solid;
                --label-font-size: 24px;
                --accordion-width: 500px;
            }
            * {
                box-sizing: border-box;
            }
            .main-wrapper > div {
                margin-bottom: 20px;
            }

            .accordion-content {
                width: var(--accordion-width);
                background-color: var(--accordion-color);
                border: var(--border-param);
            }
            .accordion-label {
                display: flex;
                padding-left: 10px;
                font-size: var(--label-font-size);
            }
            .accordion-text {
                padding: 10px;
                border-top: var(--border-param);
            }

            .accordion-content input {
                display: none;
            }
            .css-accordion-text {
                display: none;
            }
            #accordion-checkbox:checked ~ .css-accordion-text,
            #accordion-radio:checked ~ .css-accordion-text {
                display: block;
            }
            #accordion-radio:checked ~ .accordion-close-container {
                display: flex;
            }

            .js-accordion-text {
                display: none;
            }

            .accordion-close-container,
            .accordion-expander-container {
                display: none;
                margin-right: 10px;
                justify-content: end;
                color: #0000ff;
            }

            /* .css-partial-view-accordion-text {
                overflow: hidden;
                line-height: 1.2em;
                height: calc(3.6em + 10px);
                padding: 10px;
            } */
            .css-partial-view-accordion-text {
                display: -webkit-box;
                padding: 10px;
                line-height: 1.2em;
                max-height: calc(3.6em + 10px);
                -webkit-line-clamp: 3;
                line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <div class="main-container">
            <div class="main-wrapper">
                <div class="html-accordion-container">
                    <div class="html-accordion-wrapper">
                        <details class="accordion-content">
                            <summary class="accordion-label">HTML accordion</summary>
                            <div class="accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>
                        </details>
                    </div>
                </div>

                <div class="css-accordion-container">
                    <div class="css-accordion-wrapper">
                        <div class="accordion-content">
                            <input type="checkbox" id="accordion-checkbox" />
                            <label for="accordion-checkbox" class="accordion-label">CSS accordion</label>
                            <div class="accordion-text css-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>
                        </div>
                    </div>
                </div>

                <div class="js-accordion-container">
                    <div class="js-accordion-wrapper">
                        <div class="accordion-content">
                            <div class="accordion-label" onclick="switchTextVisibility(document.querySelector('.js-accordion-text'))">JS accordion</div>
                            <div class="accordion-text js-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>
                        </div>
                    </div>
                </div>

                <div class="css-radio-accordion-container">
                    <div class="css-radio-accordion-wrapper">
                        <div class="accordion-content">
                            <input type="radio" name="css-radio-accordion" id="accordion-radio" />
                            <label for="accordion-radio" class="accordion-label">CSS radio accordion</label>
                            <div class="accordion-text css-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>

                            <div class="accordion-close-container">
                                <input type="radio" name="css-radio-accordion" id="accordion-close-radio" />
                                <label for="accordion-close-radio" class="accordion-close-label">Close </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="css-partial-view-accordion-container">
                    <div class="css-partial-view-accordion-wrapper">
                        <div class="accordion-content">
                            <div class="css-partial-view-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Cubilia pharetra consectetur ad cras posuere. Etiam libero finibus integer dignissim placerat fusce amet auctor conubia. Adipiscing pharetra lacus laoreet in libero. Velit conubia pellentesque curae placerat; accumsan per lacus faucibus. Amet libero venenatis sagittis nulla tortor ante sollicitudin maximus. Pharetra nisi ultrices inceptos diam eleifend tincidunt torquent consequat. Ipsum risus ut himenaeos; adipiscing ex lacus. Class ligula condimentum porttitor tempus laoreet nascetur scelerisque. Ornare torquent magna praesent integer magnis ipsum sociosqu ac. Nisl sem fusce; porttitor odio eget penatibus hac. Eu urna rutrum hac integer platea. Potenti justo accumsan in lacus vulputate. Diam class etiam cursus aptent commodo libero in felis. Magna ac amet nisl fermentum, nec sem.</div>
                            <div class="accordion-expander-container">
                                <div class="accordion-expander" onclick="switchExpanderAndText(document.querySelector('.css-partial-view-accordion-text'))">more</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            checkTruncate(document.querySelector(".css-partial-view-accordion-text"));

            function switchTextVisibility(target) {
                target.style.display == "block" ? (target.style.display = "none") : (target.style.display = "block");
            }

            function switchExpanderAndText(target) {
                let expander = document.querySelector(".accordion-expander");
                if (target.style.display == "block") {
                    target.style.display = "-webkit-box";
                    target.style.maxHeight = "calc(3.6em + 10px)";
                    expander.innerHTML = "more";
                } else {
                    target.style.display = "block";
                    target.style.maxHeight = "none";
                    expander.innerHTML = "less";
                }
            }

            function checkTruncate(target) {
                let expanderCont = document.querySelector(".accordion-expander-container");
                if (target.offsetHeight < target.scrollHeight) {
                    expanderCont.style.display = "flex";
                } else {
                    expanderCont.style.display = "none";
                }
            }
        </script>
    </body>
</html>
