<html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <head>
        <title>Аккордеоны</title>
        <style>
            :root {
                --accordion-color: #f5f5dc;
                --div-margin-bottom: 20px;
                --border-param: 1px solid;
                --label-font-size: 24px;
                --accordion-width: 500px;
            }
            * {
                box-sizing: border-box;
            }
            .main-wrapper > div {
                margin-bottom: 20px;
            }

            /*common*/
            .accordion-content {
                position: relative;
                width: var(--accordion-width);
                background-color: var(--accordion-color);
                border: var(--border-param);
            }
            .accordion-label {
                display: flex;
                padding-left: 10px;
                font-size: var(--label-font-size);
            }
            .accordion-text {
                font-size: 16px;
            }

            /*html*/
            .html-accordion-text {
                padding: 0;
                max-height: 0;
                transition: all 0.35s ease-in-out;
            }

            /*css-js*/
            .css-accordion-text,
            .js-accordion-text {
                position: relative;
                padding-left: 10px;
                padding-right: 10px;
                max-height: 0;
                overflow: hidden;
                transition: all 0.35s ease-in-out;
            }

            .accordion-content > input {
                position: absolute;
                opacity: 0;
                left: 0;
                top: 0;
                margin: 0;
                height: 100%;
                width: 100%;
            }

            .accordion-close-container {
                display: flex;
                position: absolute;
                justify-content: end;
                right: 0;
                bottom: 0;
                opacity: 0;
                margin-right: 10px;
                justify-content: end;
                color: #0000ff;
            }
            .css-radio-accordion-close-button {
                position: absolute;
                right: 0;
                bottom: 0;
                opacity: 0;
                width: 100%;
            }
            .css-radio-accordion-open-button:checked ~ .accordion-close-container {
                opacity: 1;
            }

            /*css-accordion with 3 lines of text*/
            .css-partial-view-accordion-text {
                padding: 10px;
                line-height: 120%;
                max-height: 67px;
                overflow: hidden;
                transition: all 0.35s ease-in-out;
            }
            .accordion-expander-container {
                position: absolute;
                right: 10px;
                bottom: 0;
            }
            .accordion-expander-text-hider {
                position: absolute;
                text-align: right;
                margin-left: -30px;
                padding-right: 3px;
                width: 100%;
                height: 100%;
                background: linear-gradient(to right, transparent, var(--accordion-color) 15px);
                transition: all 0.35s ease-in-out;
            }
            .accordion-expander {
                position: relative;
                color: #0000ff;
                background-color: var(--accordion-color);
            }

            /*on click actions*/
            .css-accordion-checkbox:checked ~ .css-accordion-text,
            .css-radio-accordion-open-button:checked ~ .css-accordion-text,
            .html-accordion-content[open] > .html-accordion-text {
                padding: 10px;
                max-height: 500px;
            }
        </style>
    </head>
    <body>
        <div class="main-container">
            <div class="main-wrapper">
                <div class="html-accordion-container">
                    <div class="html-accordion-wrapper">
                        <details class="accordion-content html-accordion-content">
                            <summary class="accordion-label">HTML accordion</summary>
                            <div class="accordion-text html-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>
                        </details>
                    </div>
                </div>

                <div class="css-accordion-container">
                    <div class="css-accordion-wrapper">
                        <div class="accordion-content">
                            <label class="accordion-label">CSS accordion</label>
                            <input type="checkbox" class="css-accordion-checkbox" />
                            <div class="accordion-text css-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>
                        </div>
                    </div>
                </div>

                <div class="js-accordion-container">
                    <div class="js-accordion-wrapper">
                        <div class="accordion-content">
                            <div class="accordion-label" onclick="switchTextVisibility(this, event)">JS accordion</div>
                            <div class="accordion-text js-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>
                        </div>
                    </div>
                </div>

                <div class="css-radio-accordion-container">
                    <div class="css-radio-accordion-wrapper">
                        <div class="accordion-content">
                            <label class="accordion-label">CSS radio accordion</label>
                            <input type="radio" name="css-radio-accordion" class="css-radio-accordion-open-button" checked />
                            <div class="accordion-text css-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Inceptos risus hac sodales quam curabitur fringilla nullam primis. Convallis amet lacus nunc, facilisi eleifend tincidunt accumsan. Vel scelerisque taciti venenatis elementum elit pellentesque. Lobortis mauris eget integer egestas turpis rhoncus nullam.</div>

                            <div class="accordion-close-container">
                                <div class="accordion-close-wrapper">
                                    <label class="accordion-close-label">Close </label>
                                    <input type="radio" name="css-radio-accordion" class="css-radio-accordion-close-button" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="css-partial-view-accordion-container">
                    <div class="css-partial-view-accordion-wrapper">
                        <div class="accordion-content">
                            <div class="css-partial-view-accordion-text">Lorem ipsum odor amet, consectetuer adipiscing elit. Cubilia pharetra consectetur ad cras posuere. Etiam libero finibus integer dignissim placerat fusce amet auctor conubia. Adipiscing pharetra lacus laoreet in libero. Velit conubia pellentesque curae placerat; accumsan per lacus faucibus. Amet libero venenatis sagittis nulla tortor ante sollicitudin maximus. Pharetra nisi ultrices inceptos diam eleifend tincidunt torquent consequat. Ipsum risus ut himenaeos; adipiscing ex lacus. Class ligula condimentum porttitor tempus laoreet nascetur scelerisque. Ornare torquent magna praesent integer magnis ipsum sociosqu ac. Nisl sem fusce; porttitor odio eget penatibus hac. Eu urna rutrum hac integer platea. Potenti justo accumsan in lacus vulputate. Diam class etiam cursus aptent commodo libero in felis. Magna ac amet nisl fermentum, nec sem.</div>
                            <div class="accordion-expander-container">
                                <div class="accordion-expander-text-hider">...</div>
                                <div class="accordion-expander" onclick="switchExpanderAndText(this, event)">more</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            checkTruncate(document.querySelector(".css-partial-view-accordion-text"));

            function switchTextVisibility(sender, event) {
                let target = document.querySelector(".js-accordion-text");
                if (target.style.maxHeight == "500px") {
                    target.style.maxHeight = "0px";
                    target.style.padding = "0px";
                } else {
                    target.style.maxHeight = "500px";
                    target.style.padding = "10px";
                }
            }

            function switchExpanderAndText(sender, event) {
                let target = document.querySelector(".css-partial-view-accordion-text");
                let hider = document.querySelector(".accordion-expander-text-hider");
                if (target.style.maxHeight == "1000px") {
                    target.style.maxHeight = "67px";
                    sender.innerHTML = "more";
                    hider.innerHTML = "...";
                } else {
                    target.style.maxHeight = "1000px";
                    sender.innerHTML = "less";
                    hider.innerHTML = "";
                }
            }

            function checkTruncate(target) {
                let expanderCont = document.querySelector(".accordion-expander-container");
                if (target.offsetHeight < target.scrollHeight) {
                    expanderCont.style.opacity = 1;
                } else {
                    expanderCont.style.opacity = 0;
                }
            }
        </script>
    </body>
</html>
